<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.* "
    %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<c:set var="path" value="${pageContext.request.contextPath}" />
<fmt:requestEncoding value="utf-8"/>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="${path}/a00_com/a00_com.css" >
<script src="${path}/a00_com/jquery-3.4.1.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$("h1").text("ajax 물건 리스트(이름정보) 정보");
		
		$("#id").keyup(function(){
			var xhr = new XMLHttpRequest();
			
			var param = "name="+$("[name=name]").val();
			
			xhr.open("get","z07_expShDao2.jsp?"+param+"&frPrice=0&toPrice=9999999",true);
			xhr.onreadystatechange = function(){
				if(xhr.readyState==4&&xhr.status==200){
					$("div").html("<h2>"+xhr.responseText+"</h2>");
					
					var plist = eval('('+xhr.responseText+')');
					
					var show = "<table align='center'>";
					show += "<tr><th>번호</th><th>종류</th><th>물품명</th>"+
								"<th>가격</th><th>수량</th></tr>";
								
					for(var idx in plist){
						var prod = plist[idx];
						show += "<tr>";
						for(var jdx in prod){
							show +="<td>"+prod[jdx]+"</td>"
						}
						show += "</tr>";
					}
					show += "</table>";
					$("div").html(show);
					
				}
			};
			xhr.send();
			
		});
	});

</script>
</head>
<body>
<h1></h1>
<table  align="center">
	<tr><th>물건명</th>
		<td><input id="id" type="text" name="name" /></td></tr>
</table>
<div></div>
</body>
</html>